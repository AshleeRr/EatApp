<div class="row justify-content-center">
  <div class="col-12 col-md-8">
    <div class="card shadow p-4">

      <h3 class="mb-3 text-center">{{pedido.comercio.name}}</h3>
      <img src="{{pedido.comercio.logo}}" 
           class="mx-auto d-block rounded mb-3" 
           style="width:100px;height:100px;object-fit:cover;">

      <p><strong>Status:</strong> {{pedido.estado}}</p>
      <p><strong>Date:</strong> {{Format pedido.createdAt}}</p>
      {{#if (eq pedido.estado "en proceso")}}
        <p><strong>Address:</strong> {{pedido.direccion.nombre}}</p>
        <p><strong> Addres Info:</strong> {{pedido.direccion.descripcion}}</p>
      {{/if}}

      <h5 class="mt-4">Products</h5>
      <ul class="list-group">
        {{#each pedido.detalles}}
          <li class="list-group-item d-flex align-items-center">
            <img src="{{this.producto.imagen}}" 
                 alt="{{this.producto.nombre}}" 
                 style="width:50px;height:50px;object-fit:cover;"
                 class="rounded me-3">
            <div>
              <p class="mb-0">{{this.producto.nombre}}</p>
              <small>${{this.producto.precio}}</small>
            </div>
          </li>
        {{/each}}
      </ul>

      <h4 class="mt-3 text-end">Total: ${{pedido.total}}</h4>

      {{#if (eq pedido.estado "en proceso")}}
        <form action="/delivery/orders/{{pedido.id}}/complete" method="POST">
          <input type="hidden" name="pedidoId" value="{{pedido.id}}">
          <input type="hidden" name="deliveryId" value="{{req.user.id}}">
          
          <button type="submit" class="btn btn-dark w-100 mt-3">
            <i class="bi bi-check-circle"></i> Completed
          </button>
        </form>
      {{/if}}


      <a href="/delivery/home" class="btn btn-outline-dark w-100 mt-2">
        Back
      </a>

    </div>
  </div>
</div>
